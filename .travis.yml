language: ruby

sudo: false

bundler_args: --without development

branches:
  only:
  - master
  - 6.4.0-stable

before_install:
  - gem update --system
  - gem update bundler

rvm:
  - 2.5.1

gemfile:
  - Gemfile

matrix:
  include:
  - name: I18n 1.0 >
    before_install: gem install i18n -v 1.0.0
    env: I18N_VERSION=1.0.0
    gemfile: Gemfile.i18n
  - name: I18n 1.1.0 <
    before_install: gem install i18n -v 1.1.0
    env: I18N_VERSION=1.1.0
    gemfile: Gemfile

env:
  global:
    - CI="travis"
    - MONGODB=4.0.1

before_script:
  - wget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-${MONGODB}.tgz -O /tmp/mongodb.tgz
  - tar -xvf /tmp/mongodb.tgz
  - mkdir /tmp/data
  - ${PWD}/mongodb-linux-x86_64-${MONGODB}/bin/mongod --dbpath /tmp/data --bind_ip 127.0.0.1 --auth &> /dev/null &

notifications:
  email: false
  irc:
    on_success: change
    on_failure: always
    channels:
      - "irc.freenode.org#mongoid"
